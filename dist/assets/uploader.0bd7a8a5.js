import{u as w,d as k}from"./index.fa5729b6.js";import{p as x}from"./plus.5f17c772.js";import{d as h,v as B,h as g,a as f,c as F,b as d,j as u,f as E,e as i,C as D,a2 as A,a3 as I,_ as R,r as v,w as S,q as C,F as M,V as b,G as P,H as $}from"./index.5191b12d.js";import"./plugin-vue_export-helper.41ffa612.js";const q=["src"],N=h({__name:"SingleUpload",props:{modelValue:{type:String,default:""}},emits:["update:modelValue"],setup(_,{emit:p}){const c=_,e=B({get(){return c.modelValue},set(s){p("update:modelValue",s)}});async function m(s){const{data:n}=await w(s.file);e.value=n.url}function l(s){return s.size>2*1048*1048?(I.warning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u80FD\u5927\u4E8E2M"),!1):!0}return(s,n)=>{const U=g("el-icon");return f(),F(u(A),{class:"single-uploader",modelValue:u(e),"onUpdate:modelValue":n[0]||(n[0]=V=>D(e)?e.value=V:null),"show-file-list":!1,"list-type":"picture-card","before-upload":l,"http-request":m},{default:d(()=>[u(e)?(f(),E("img",{key:0,src:u(e),class:"single"},null,8,q)):(f(),F(U,{key:1,class:"single-uploader-icon"},{default:d(()=>[i(u(x))]),_:1}))]),_:1},8,["modelValue"])}}});const j=R(N,[["__scopeId","data-v-e3d40812"]]),z=["src"],G=h({__name:"MultiUpload",props:{modelValue:{type:Array,default:[]},limit:{type:Number,default:5}},emits:["update:modelValue"],setup(_,{emit:p}){const c=_,e=v(""),m=v(!1),l=v([]);S(()=>c.modelValue,a=>{console.log("newVal",a);const t=l.value.map(o=>o.url);t.length>0&&t.length===a.length&&t.every(o=>a.some(r=>r===o))&&a.every(o=>t.some(r=>r===o))||(l.value=a.map(o=>({url:o})))},{immediate:!0});async function s(a){const{data:t}=await w(a.file),o=l.value.findIndex(r=>r.uid==a.file.uid);l.value.splice(o,1,{name:t.name,url:t.url}),p("update:modelValue",l.value.map(r=>r.url))}function n(a){const t=a.url;t&&k(t).then(()=>{p("update:modelValue",l.value.map(o=>o.url))})}function U(a){return a.size>2*1048*1048?(I.warning("\u4E0A\u4F20\u56FE\u7247\u4E0D\u80FD\u5927\u4E8E2M"),!1):!0}const V=a=>{e.value=a.url,m.value=!0};return(a,t)=>{const o=g("el-icon"),r=g("el-dialog");return f(),E(M,null,[i(u(A),{"file-list":l.value,"onUpdate:file-list":t[0]||(t[0]=y=>l.value=y),"list-type":"picture-card","before-upload":U,"http-request":s,"on-remove":n,"on-preview":V,limit:c.limit},{default:d(()=>[i(o,null,{default:d(()=>[i(u(x))]),_:1})]),_:1},8,["file-list","limit"]),i(r,{modelValue:m.value,"onUpdate:modelValue":t[1]||(t[1]=y=>m.value=y)},{default:d(()=>[C("img",{"w-full":"",src:e.value,alt:"Preview Image"},null,8,z)]),_:1},8,["modelValue"])],64)}}}),H={class:"app-container"},Q=h({__name:"uploader",setup(_){const p=v(b),c=P({formData:{picUrl:"https://oss.youlai.tech/default/2022/11/20/18e206dae97b40329661537d1e433639.jpg",picUrls:["https://oss.youlai.tech/default/2022/11/20/8af5567816094545b53e76b38ae9c974.webp","https://oss.youlai.tech/default/2022/11/20/13dbfd7feaf848c2acec2b21675eb9d3.webp"]}}),{formData:e}=$(c);return(m,l)=>{const s=g("el-form-item");return f(),E("div",H,[i(u(b),{ref_key:"dataFormRef",ref:p,model:u(e)},{default:d(()=>[i(s,{label:"\u5355\u56FE\u4E0A\u4F20"},{default:d(()=>[i(j,{modelValue:u(e).picUrl,"onUpdate:modelValue":l[0]||(l[0]=n=>u(e).picUrl=n)},null,8,["modelValue"])]),_:1}),i(s,{label:"\u591A\u56FE\u4E0A\u4F20"},{default:d(()=>[i(G,{modelValue:u(e).picUrls,"onUpdate:modelValue":l[1]||(l[1]=n=>u(e).picUrls=n)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])])}}});export{Q as default};
