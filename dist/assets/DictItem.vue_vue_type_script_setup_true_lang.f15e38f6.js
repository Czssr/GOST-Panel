import{d as K,w as O,r as x,V as F,G as W,H as X,a6 as Y,I as ee,h as r,Z as te,a as g,f as ue,e as t,b as a,j as e,y as s,N as ae,c as b,k as q,x as le,q as oe,t as ne,a3 as y,a7 as ie,a8 as re,a9 as se,E as de,aa as me}from"./index.10772f47.js";import{p as pe}from"./plus.88432ff9.js";import{_ as I}from"./delete.aeb8f652.js";import{s as ce}from"./search.3fac065e.js";import{r as fe}from"./refresh.327401fe.js";import{e as _e}from"./edit.91a5d224.js";const ge={class:"app-container"},ye={class:"dialog-footer"},De={name:"dictItem"},Ve=K({...De,props:{typeCode:{type:String,default:()=>""},typeName:{type:String,default:()=>""}},setup(v){const f=v;O(()=>f.typeCode,n=>{u.queryParams.typeCode=n,u.formData.typeCode=n,p()});const V=x(F),B=x(F),u=W({loading:!0,ids:[],single:!0,multiple:!0,total:0,queryParams:{pageNum:1,pageSize:10},dictItemList:[],dialog:{visible:!1},formData:{typeCode:f.typeCode,typeName:f.typeName,status:1,sort:1},rules:{name:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u5178\u9879\u540D\u79F0",trigger:"blur"}],value:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u5178\u9879\u503C",trigger:"blur"}]},localDictCode:f.typeCode,localDictName:f.typeName}),{loading:U,multiple:P,queryParams:c,dictItemList:S,dialog:E,formData:i,rules:A,total:k}=X(u);function p(){u.queryParams.typeCode?(u.loading=!0,Y(u.queryParams).then(({data:n})=>{u.dictItemList=n.list,u.total=n.total,u.loading=!1})):(u.dictItemList=[],u.total=0,u.queryParams.pageNum=1,u.loading=!1)}function R(){V.value.resetFields(),p()}function L(n){u.ids=n.map(l=>l.id),u.single=n.length!==1,u.multiple=!n.length}function M(){if(!u.formData.typeCode){y.warning("\u8BF7\u9009\u62E9\u5B57\u5178\u7C7B\u578B\u540E\u6DFB\u52A0\u6570\u636E\u9879");return}u.dialog={title:"\u6DFB\u52A0\u5B57\u5178\u6570\u636E\u9879",visible:!0}}function z(n){u.dialog={title:"\u4FEE\u6539\u5B57\u5178\u6570\u636E\u9879",visible:!0};const l=n.id||u.ids;ie(l).then(({data:d})=>{u.formData=d})}function T(){B.value.validate(n=>{n&&(u.formData.id?re(u.formData.id,u.formData).then(()=>{y.success("\u4FEE\u6539\u6210\u529F"),D(),p()}):se(u.formData).then(()=>{y.success("\u65B0\u589E\u6210\u529F"),D(),p()}))})}function D(){u.dialog.visible=!1,u.formData.id=void 0,B.value.resetFields()}function h(n){const l=[n.id||u.ids].join(",");de.confirm("\u786E\u8BA4\u5220\u9664\u5DF2\u9009\u4E2D\u7684\u6570\u636E\u9879?","\u8B66\u544A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{me(l).then(()=>{y.success("\u5220\u9664\u6210\u529F"),p()})}).catch(()=>y.info("\u5DF2\u53D6\u6D88\u5220\u9664"))}return ee(()=>{p()}),(n,l)=>{const d=r("el-button"),m=r("el-form-item"),C=r("el-input"),_=r("el-table-column"),N=r("el-tag"),j=r("el-table"),Q=r("pagination"),$=r("el-input-number"),w=r("el-radio"),G=r("el-radio-group"),H=r("el-dialog"),Z=te("loading");return g(),ue("div",ge,[t(e(F),{ref_key:"queryFormRef",ref:V,model:e(c),inline:!0},{default:a(()=>[t(m,null,{default:a(()=>[t(d,{type:"success",icon:e(pe),onClick:M},{default:a(()=>[s("\u65B0\u589E")]),_:1},8,["icon"]),t(d,{type:"danger",icon:e(I),disabled:e(P),onClick:h},{default:a(()=>[s("\u5220\u9664")]),_:1},8,["icon","disabled"])]),_:1}),t(m,{prop:"name"},{default:a(()=>[t(C,{modelValue:e(c).name,"onUpdate:modelValue":l[0]||(l[0]=o=>e(c).name=o),placeholder:"\u6570\u636E\u9879\u540D\u79F0",clearable:""},null,8,["modelValue"])]),_:1}),t(m,null,{default:a(()=>[t(d,{type:"primary",icon:e(ce),onClick:p},{default:a(()=>[s("\u641C\u7D22")]),_:1},8,["icon"]),t(d,{icon:e(fe),onClick:R},{default:a(()=>[s("\u91CD\u7F6E")]),_:1},8,["icon"])]),_:1})]),_:1},8,["model"]),ae((g(),b(j,{data:e(S),border:"",onSelectionChange:L},{default:a(()=>[t(_,{type:"selection","min-width":"5%"}),t(_,{label:"\u6570\u636E\u9879\u540D\u79F0",prop:"name"}),t(_,{label:"\u6570\u636E\u9879\u503C",prop:"value"}),t(_,{label:"\u72B6\u6001",align:"center"},{default:a(o=>[o.row.status===1?(g(),b(N,{key:0,type:"success"},{default:a(()=>[s("\u542F\u7528")]),_:1})):(g(),b(N,{key:1,type:"info"},{default:a(()=>[s("\u7981\u7528")]),_:1}))]),_:1}),t(_,{label:"\u64CD\u4F5C",align:"center"},{default:a(o=>[t(d,{type:"primary",icon:e(_e),circle:"",plain:"",onClick:q(J=>z(o.row),["stop"])},null,8,["icon","onClick"]),t(d,{type:"danger",icon:e(I),circle:"",plain:"",onClick:q(J=>h(o.row),["stop"])},null,8,["icon","onClick"])]),_:1})]),_:1},8,["data"])),[[Z,e(U)]]),e(k)>0?(g(),b(Q,{key:0,total:e(k),page:e(c).pageNum,"onUpdate:page":l[1]||(l[1]=o=>e(c).pageNum=o),limit:e(c).pageSize,"onUpdate:limit":l[2]||(l[2]=o=>e(c).pageSize=o),onPagination:p},null,8,["total","page","limit"])):le("",!0),t(H,{title:e(E).title,modelValue:e(E).visible,"onUpdate:modelValue":l[8]||(l[8]=o=>e(E).visible=o),width:"500px",onClose:D},{footer:a(()=>[oe("div",ye,[t(d,{type:"primary",onClick:T},{default:a(()=>[s("\u786E \u5B9A")]),_:1}),t(d,{onClick:D},{default:a(()=>[s("\u53D6 \u6D88")]),_:1})])]),default:a(()=>[t(e(F),{ref_key:"dataFormRef",ref:B,model:e(i),rules:e(A),"label-width":"100px"},{default:a(()=>[t(m,{label:"\u5B57\u5178\u7C7B\u578B\u540D\u79F0"},{default:a(()=>[s(ne(v.typeName),1)]),_:1}),t(m,{label:"\u6570\u636E\u9879\u540D\u79F0",prop:"name"},{default:a(()=>[t(C,{modelValue:e(i).name,"onUpdate:modelValue":l[3]||(l[3]=o=>e(i).name=o),placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u6570\u636E\u9879\u540D\u79F0"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u6570\u636E\u9879\u503C",prop:"value"},{default:a(()=>[t(C,{modelValue:e(i).value,"onUpdate:modelValue":l[4]||(l[4]=o=>e(i).value=o),placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u6570\u636E\u9879\u503C"},null,8,["modelValue"])]),_:1}),t(m,{label:"\u6392\u5E8F",prop:"sort"},{default:a(()=>[t($,{modelValue:e(i).sort,"onUpdate:modelValue":l[5]||(l[5]=o=>e(i).sort=o),style:{width:"80px"},"controls-position":"right",min:0},null,8,["modelValue"])]),_:1}),t(m,{label:"\u72B6\u6001",prop:"status"},{default:a(()=>[t(G,{modelValue:e(i).status,"onUpdate:modelValue":l[6]||(l[6]=o=>e(i).status=o)},{default:a(()=>[t(w,{label:1},{default:a(()=>[s("\u6B63\u5E38")]),_:1}),t(w,{label:0},{default:a(()=>[s("\u505C\u7528")]),_:1})]),_:1},8,["modelValue"])]),_:1}),t(m,{label:"\u5907\u6CE8",prop:"remark"},{default:a(()=>[t(C,{modelValue:e(i).remark,"onUpdate:modelValue":l[7]||(l[7]=o=>e(i).remark=o),type:"textarea"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["title","modelValue"])])}}});export{Ve as _};
