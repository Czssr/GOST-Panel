import{d as H,s as Q,r as b,V as x,W as p,G as $,H as N,w as K,I as O,f as C,e as a,b as d,j as t,q as l,t as m,x as P,a as f,c as j,X as z,k as A,y as M,u as U,Q as G,h as g,p as L,m as W,l as X,_ as Z}from"./index.10772f47.js";import{S as _}from"./index.83e43a14.js";const J=u=>(L("data-v-1dfa2e72"),u=u(),W(),u),Y={class:"login-container"},ee=J(()=>l("div",{class:"title-container"},[l("h3",{class:"title"},"\u540E\u53F0\u7BA1\u7406")],-1)),oe={class:"svg-container"},te={class:"svg-container"},se={key:0,class:"copyright"},ne=H({__name:"index",setup(u){const{user:V}=Q(),h=U(),w=b(x),y=b(p),s=$({redirect:"",loginForm:{username:"admin",password:"123456"},loginRules:{username:[{required:!0,trigger:"blur"}],password:[{required:!0,trigger:"blur",validator:R}]},loading:!1,passwordType:"password",capslockTooltipDisabled:!0,otherQuery:{},clientHeight:document.documentElement.clientHeight,showCopyright:!0,showDialog:!1});function R(e,o,n){o.length<6?n(new Error("The password can not be less than 6 digits")):n()}const{loginForm:i,loginRules:T,loading:E,passwordType:r,capslockTooltipDisabled:v,showCopyright:F}=N(s);function I(e){const{key:o}=e;s.capslockTooltipDisabled=o&&o.length===1&&o>="A"&&o<="Z"}function S(){r.value==="password"?r.value="":r.value="password",G(()=>{y.value.focus()})}function k(){w.value.validate(e=>{if(e)s.loading=!0,V.login(s.loginForm).then(()=>{X.push({path:s.redirect||"/",query:s.otherQuery}),s.loading=!1}).catch(()=>{s.loading=!1});else return!1})}K(h,()=>{const e=h.query;e&&(s.redirect=e.redirect,s.otherQuery=B(e))},{immediate:!0});function B(e){return Object.keys(e).reduce((o,n)=>(n!=="redirect"&&(o[n]=e[n]),o),{})}return O(()=>{window.onresize=()=>{s.clientHeight>document.documentElement.clientHeight?s.showCopyright=!1:s.showCopyright=!0}}),(e,o)=>{const n=g("el-form-item"),q=g("el-tooltip"),D=g("el-button");return f(),C("div",Y,[a(t(x),{ref_key:"loginFormRef",ref:w,model:t(i),rules:t(T),class:"login-form","auto-complete":"on","label-position":"left"},{default:d(()=>[ee,a(n,{prop:"username"},{default:d(()=>[l("span",oe,[a(_,{"icon-class":"user"})]),a(t(p),{ref:"username",modelValue:t(i).username,"onUpdate:modelValue":o[0]||(o[0]=c=>t(i).username=c),placeholder:e.$t("login.username"),name:"username",type:"text",tabindex:"1","auto-complete":"on"},null,8,["modelValue","placeholder"])]),_:1}),a(q,{disabled:t(v),content:"Caps lock is On",placement:"right"},{default:d(()=>[a(n,{prop:"password"},{default:d(()=>[l("span",te,[a(_,{"icon-class":"password"})]),(f(),j(t(p),{ref_key:"passwordRef",ref:y,key:t(r),modelValue:t(i).password,"onUpdate:modelValue":o[1]||(o[1]=c=>t(i).password=c),type:t(r),placeholder:"Password",name:"password",tabindex:"2","auto-complete":"on",onKeyup:[I,z(k,["enter"])],onBlur:o[2]||(o[2]=c=>v.value=!0)},null,8,["modelValue","type","onKeyup"])),l("span",{class:"show-pwd",onClick:S},[a(_,{"icon-class":t(r)==="password"?"eye":"eye-open"},null,8,["icon-class"])])]),_:1})]),_:1},8,["disabled"]),a(D,{size:"default",loading:t(E),type:"primary",style:{width:"100%","margin-bottom":"30px"},onClick:A(k,["prevent"])},{default:d(()=>[M(m(e.$t("login.login")),1)]),_:1},8,["loading","onClick"])]),_:1},8,["model","rules"]),t(F)==!0?(f(),C("div",se,[l("p",null,m(e.$t("login.copyright")),1),l("p",null,m(e.$t("login.icp")),1)])):P("",!0)])}}});const re=Z(ne,[["__scopeId","data-v-1dfa2e72"]]);export{re as default};
